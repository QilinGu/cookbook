{% extends "layout.html" %}
{% block body %}
 <a href="{{ url_for('show_entries') }}">Back</a>
 <ul class=entries>
    <li><a href="{{ url_for('show_entry', id=entry.id) }}" ><h2>{{ entry.title }}</h2></a> {{ entry.text|safe }}<br>
    <a href="{{ url_for('show_profile', login=entry.userid) }}">{{ entry.userid }}</a><br> {{ entry.tags }}
    <!--<a href="{{ url_for('image', id=entry.id) }}"><img src="data:image/png;base64,{{ entry.image }}"/></a>-->
 </ul>
 <script>
$(document).ready(function(){
  $("#ratings").raty({
  cancelOff  : "{{ url_for('static', filename='lib/images/cancel-off.png') }}" ,
  cancelOn   : "{{ url_for('static', filename='lib/images/cancel-on.png') }}",
  starHalf   : "{{ url_for('static', filename='lib/images/star-half.png') }}",
  starOff    : "{{ url_for('static', filename='lib/images/star-off.png') }}" ,
  starOn     : "{{ url_for('static', filename='lib/images/star-on.png') }}",


  click: function(score, evt) {
        $.ajax({
            url: "{{ url_for('rate') }}",
            type: 'POST',
            data: JSON.stringify({'rating':score,'userid':'{{ session.user_in }}','itemid':{{ entry.id }} }),
            contentType: 'application/json;charset=UTF-8',
            success: function(response) {
                console.log(response);
            },
            error: function(error) {
                console.log(error);
            }
        });
  }});
});
</script>
 <div id="ratings" path="{{ url_for('static', filename='lib/images/') }}"></div>
 {% if canedit %}
 <a href="{{ url_for('edit', id=entry.id) }}">Edit</a>
 {% endif %}
{% endblock %}